appId: com.namedrill.namedrill
---
# NameDrill - Quiz Mode Complete Flow Test
# Tests the full quiz flow including results screen
# WARNING: This test takes ~65 seconds due to the 60-second quiz timer
# Requires: App built with --dart-define=TEST_MODE=true

- launchApp:
    clearState: true

# Wait for app to load with test data
- extendedWaitUntil:
    visible: "NameDrill"
    timeout: 20000

# Navigate to Test Group
- extendedWaitUntil:
    visible: "Test Group"
    timeout: 15000
- tapOn: "Test Group"

# Start Quiz
- extendedWaitUntil:
    visible: "Quiz"
    timeout: 10000
- tapOn: "Quiz"

# Wait for quiz to load
- extendedWaitUntil:
    visible: "Quiz Photo"
    timeout: 15000

# Answer questions continuously until timer ends
# Keep tapping answers - the quiz will auto-end after 60 seconds
- tapOn:
    text: "Answer option.*"
- extendedWaitUntil:
    visible: "Quiz Photo"
    timeout: 5000

- tapOn:
    text: "Answer option.*"
- extendedWaitUntil:
    visible: "Quiz Photo"
    timeout: 5000

- tapOn:
    text: "Answer option.*"
- extendedWaitUntil:
    visible: "Quiz Photo"
    timeout: 5000

- tapOn:
    text: "Answer option.*"
- extendedWaitUntil:
    visible: "Quiz Photo"
    timeout: 5000

- tapOn:
    text: "Answer option.*"
- extendedWaitUntil:
    visible: "Quiz Photo"
    timeout: 5000

# Wait for results screen - look for "Try Again" button which is on results
- extendedWaitUntil:
    visible: "Try Again"
    timeout: 65000

# Verify results screen elements - look for text that's visible
- assertVisible: "Done"

# Test Try Again button
- tapOn: "Try Again"

# Verify quiz restarts
- extendedWaitUntil:
    visible: "Quiz Photo"
    timeout: 10000

# Navigate back instead of waiting for another 60 seconds
- back

# Verify back on group detail
- extendedWaitUntil:
    visible: "Quiz"
    timeout: 10000
