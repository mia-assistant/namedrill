appId: com.namedrill.namedrill
---
# NameDrill - Learn Mode Flow Test
# 
# Comprehensive test for the Learn Mode feature including:
# - Onboarding (if needed)
# - Group navigation  
# - Learn Mode flashcard interactions
# - Session completion summary
#
# PREREQUISITES:
# Before running this test, execute: ./setup_test_data.sh
# This creates test data with 3 people in "Test Learn Group"
#
# Run with: cd app && ~/.maestro/bin/maestro test maestro/learn_mode_flow.yaml

- launchApp:
    clearState: true  # Fresh start for consistent test

# ==========================================
# Handle Onboarding (shows after clearState)
# ==========================================

- extendedWaitUntil:
    visible: "Continue"
    timeout: 15000

# Screen 1 - Welcome
- tapOn: "Continue"

# Screen 2 - How it works
- extendedWaitUntil:
    visible: "Continue"
    timeout: 10000
- tapOn: "Continue"

# Screen 3 - Camera permission (skip)
- extendedWaitUntil:
    visible: "Maybe Later"
    timeout: 10000
- tapOn: "Maybe Later"

# ==========================================
# Home Screen
# ==========================================

- extendedWaitUntil:
    visible: "NameDrill"
    timeout: 10000

# Note: clearState wipes the database too, so test data needs to be re-setup
# For now, let's create a group and test the empty learn mode state

# Create a test group
- tapOn: "New Group"
- extendedWaitUntil:
    visible: "Create"
    timeout: 10000
- inputText: "Learn Test"
- tapOn: "Create"

# Navigate to group
- extendedWaitUntil:
    visible: "Learn Test"
    timeout: 15000
- tapOn: "Learn Test"

# ==========================================
# Group Detail - Empty State
# ==========================================

- extendedWaitUntil:
    visible: "No people yet"
    timeout: 10000

# Verify Learn button exists
- assertVisible: "Learn"

# Tap Learn - should show empty/no cards state
- tapOn: "Learn"

# Should see "All caught up" empty state (no cards to review)
- extendedWaitUntil:
    visible: "All caught up"
    timeout: 10000
- assertVisible: "No cards due for review"
- assertVisible: "Done"

# Tap Done to go back
- tapOn: "Done"

# Should be back at group detail
- extendedWaitUntil:
    visible: "Learn Test"
    timeout: 10000

# ==========================================
# Test Complete!
# ==========================================
